"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[975],{76036:function(e,t,n){n.d(t,{v:function(){return ApproveAndTx}});var i=n(57437),a=n(72009),u=n(81628),p=n(2265),r=n(71424),l=n(56926),y=n(30197);let s={},useApproves=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*BigInt(1e18),{address:i}=(0,l.mA)(),m=(0,l.t_)(),{data:T}=(0,l.py)(),[o,c]=(0,p.useState)(!1),A=(0,p.useMemo)(()=>Object.keys(e).filter(e=>e!==a.K8),[e]),[d,R]=(0,p.useState)(t&&s[t]||{}),updateAllownce=(e,n)=>{t&&(s[t]={...s[t]||{},[e]:n},R(t=>({...t,[e]:n})))},{data:f}=(0,l.Ov)();(0,p.useEffect)(()=>{i&&t&&A.forEach(e=>{m.readContract({abi:y.em,address:e,functionName:"allowance",args:[i,t]}).then(t=>updateAllownce(e,t)).catch(console.error)})},[A,i,f]);let[v,_]=(0,p.useState)(!1),S=(0,p.useMemo)(()=>A.filter(t=>(0,u.ok)(e,t)>0n&&(0,u.ok)(e,t)>(0,u.ok)(d,t)),[e,A,d]),approve=async()=>{if(0!=S.length&&t)try{_(!0),c(!1);for(let i=0;i<S.length;i++){let a=S[i],u=!1===n?e[a]:n,p=await (null==T?void 0:T.writeContract({abi:y.em,address:a,functionName:"approve",args:[t,u]}));p&&await (null==m?void 0:m.waitForTransactionReceipt({hash:p})),updateAllownce(a,u)}r.toast.success("Approve success"),_(!1),c(!0)}catch(e){throw r.toast.error((0,u.az)(e)),_(!1),c(!1),e}};return{approve,loading:v,shouldApprove:S.length>0,isSuccess:o}};var m=n(43003),T=n(35769),o=n(72084);function ApproveAndTx(e){let{className:t,tx:n,approves:a,spender:u,requestAmount:r,config:l,toast:y=!0,disabled:s,onTxSuccess:c,onApproveSuccess:A}=e,{write:d,isLoading:R,isSuccess:f,rePrepare:v}=(0,m.R)(l,y),_=(0,p.useRef)();_.current=c,(0,p.useEffect)(()=>{_.current&&f&&_.current()},[f]);let S=s||!d||R||!1===l.enabled,{approve:E,shouldApprove:M,loading:b,isSuccess:h}=useApproves(a||{},u,r),x=(0,p.useRef)();return(x.current=A,(0,p.useEffect)(()=>{x.current&&h&&x.current(),h&&v&&v()},[h]),M)?(0,i.jsxs)("button",{className:(0,T.m)("btn-primary flex items-center justify-center gap-4",t),onClick:E,disabled:s||!E||b,children:[b&&(0,i.jsx)(o.$,{}),"Approve"]}):(0,i.jsxs)("button",{className:(0,T.m)("btn-primary flex items-center justify-center gap-4",t),onClick:()=>d(),disabled:S,children:[R&&(0,i.jsx)(o.$,{}),n]})}},80547:function(e,t,n){n.d(t,{W:function(){return AssetInput}});var i=n(57437),a=n(81628),u=n(20373),p=n(57042),r=n(16691),l=n.n(r),y=n(2265),s=n(16775);function AssetInput(e){let{asset:t="ETH",balance:n,balanceTit:r="Balance",balanceDecimals:m=18,exchange:T,readonly:o,selected:c,onClick:A,amount:d,setAmount:R,price:f,disable:v}=e,_=(0,y.useRef)(null),S=void 0!==n&&(0,a.su)("number"==typeof d?d+"":d||"")>("bigint"==typeof n?n:0n);return(0,i.jsxs)("div",{className:"relative w-full",onClick:()=>{A&&!v&&A()},children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:"absolute flex items-center gap-2 top-1/2 left-4 -translate-y-1/2",children:[(0,i.jsx)(l(),{width:24,height:24,src:"/".concat(t,".svg"),alt:""}),(0,i.jsxs)("div",{className:"text-base font-medium",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:t}),f&&(0,i.jsx)("div",{className:"text-neutral-500 text-xs",children:f})]}),T&&(0,i.jsxs)("div",{className:"text-slate-500 text-xs",children:["~$",T]})]})]}),(0,i.jsx)("input",{value:d,onChange:e=>R(e.target.value),ref:_,type:"number",disabled:v,className:(0,p.Z)(o?"bg-slate-50":"bg-white",{"border-red-400 !border-2 focus:border-red-400":S,"border-slate-400  focus:border-blue-400 ":!S},"w-full h-14 text-right pr-4 font-bold text-2xl border focus:border-2 text-slate-700 rounded-md outline-none"),placeholder:"0.000",step:.01,title:"",readOnly:o})]}),void 0!=n&&(0,i.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 text-sm",children:[(0,i.jsxs)("div",{children:[r,": ",(0,u.Rp)(n,3,m),(0,i.jsx)("button",{className:"text-indigo-500 ml-2",onClick:()=>{let e=(0,s.b)(n,m);R(e),A&&!v&&A()},children:"Max"})]}),(0,i.jsx)("div",{className:"text-sm text-red-400",children:S?"Insufficient account balance":""})]})]})}},72084:function(e,t,n){n.d(t,{$:function(){return Spinner}});var i=n(57437);let Spinner=e=>{let{className:t}=e;return(0,i.jsxs)("svg",{fill:"none",className:t?"text-white":"animate-spin h-5 w-5 2-ml-1 2mr-3",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},90228:function(e,t){t.Z=[{inputs:[{internalType:"contract IVault",name:"vault",type:"address"}],name:"AAR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"address",name:"ptyPoolAboveAARU",type:"address"}],name:"calcDeltaAssetForPtyPoolMatchAboveAARU",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"address",name:"ptyPoolBelowAARS",type:"address"}],name:"calcDeltaUsbForPtyPoolMatchBelowAARS",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"calcMintLeveragedTokensBelowAARS",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"calcMintPairsAtAdjustmentPhase",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"calcMintPairsAtStabilityPhase",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"calcMintUsbAboveAARU",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"usbAmount",type:"uint256"}],name:"calcPairdLeveragedTokenAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"leveragedTokenAmount",type:"uint256"}],name:"calcPairedRedeemAssetAmount",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"leveragedTokenAmount",type:"uint256"}],name:"calcPairedUsbAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"leveragedTokenAmount",type:"uint256"}],name:"calcRedeemByLeveragedTokenAboveAARU",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"usbAmount",type:"uint256"}],name:"calcRedeemByUsbBelowAARS",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"usbAmount",type:"uint256"}],name:"calcUsbToLeveragedTokens",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],name:"getVaultState",outputs:[{components:[{internalType:"uint256",name:"M_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH",type:"uint256"},{internalType:"uint256",name:"P_ETH_DECIMALS",type:"uint256"},{internalType:"uint256",name:"M_USB_ETH",type:"uint256"},{internalType:"uint256",name:"M_ETHx",type:"uint256"},{internalType:"uint256",name:"aar",type:"uint256"},{internalType:"uint256",name:"AART",type:"uint256"},{internalType:"uint256",name:"AARS",type:"uint256"},{internalType:"uint256",name:"AARU",type:"uint256"},{internalType:"uint256",name:"AARC",type:"uint256"},{internalType:"uint256",name:"AARDecimals",type:"uint256"},{internalType:"uint256",name:"RateR",type:"uint256"},{internalType:"uint256",name:"AARBelowSafeLineTime",type:"uint256"},{internalType:"uint256",name:"AARBelowCircuitBreakerLineTime",type:"uint256"},{internalType:"uint256",name:"settingsDecimals",type:"uint256"}],internalType:"struct Constants.VaultState",name:"",type:"tuple"}],stateMutability:"view",type:"function"}]},43003:function(e,t,n){n.d(t,{R:function(){return useWrapContractWrite}});var i=n(81628),a=n(2265),u=n(71424),p=n(56926);function useWrapContractWrite(e){var t;let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,p.PJ)(e),l=(0,p.GG)(r.config),y=(0,p.BX)({hash:null===(t=l.data)||void 0===t?void 0:t.hash}),s=l.isLoading||y.isLoading,m=l.isSuccess&&y.isSuccess;return(0,a.useEffect)(()=>{n&&(l.error?u.toast.error((0,i.az)(l.error)):m&&u.toast.success("Transaction success"))},[l.error,m]),{...l,isLoading:s,isSuccess:m,rePrepare:r.refetch}}},20373:function(e,t,n){n.d(t,{Rp:function(){return displayBalanceWithUnit},ZM:function(){return displayBalanceWithoutFormat},dq:function(){return displayBalance}});var i=n(16775),a=n(79352);let displayBalanceWithUnit=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2?arguments[2]:void 0;if(!e)return"0.000";let a=10**t;return(Math.floor(Number((0,i.b)(e,n))*a)/a).toLocaleString("en-US",{maximumFractionDigits:t})},displayBalance=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!e)return"0.000";let n=10**t;return(Math.floor(Number((0,a.d)(e))*n)/n).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})},displayBalanceWithoutFormat=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!e)return"0.000";let n=10**t;return String(Math.floor(Number((0,a.d)(e))*n)/n)}}}]);