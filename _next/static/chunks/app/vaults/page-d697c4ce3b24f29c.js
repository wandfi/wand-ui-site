(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{31851:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("Table"),c=l.forwardRef((e,t)=>{let{children:s,className:n}=e,c=(0,a.__rest)(e,["children","className"]);return l.createElement("div",{className:(0,r.q)(i("root"),"overflow-auto",n)},l.createElement("table",Object.assign({ref:t,className:(0,r.q)(i("table"),"w-full tabular-nums text-tremor-default","text-tremor-content","dark:text-dark-tremor-content")},c),s))});c.displayName="Table"},75646:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("TableBody"),c=l.forwardRef((e,t)=>{let{children:s,className:n}=e,c=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("tbody",Object.assign({ref:t,className:(0,r.q)(i("root"),"align-top overflow-x-auto divide-y","divide-tremor-border","dark:divide-dark-tremor-border",n)},c),s))});c.displayName="TableBody"},63326:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(50044),l=s(2265),n=s(37517),r=s(93568),i=s(76503);let c=(0,r.fn)("TableCell"),d=l.forwardRef((e,t)=>{let{children:s,className:r}=e,d=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("td",Object.assign({ref:t,className:(0,i.q)(c("root"),"align-middle whitespace-nowrap tabular-nums text-left",n.W.twoXl.paddingAll,r)},d),s))});d.displayName="TableCell"},68938:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("TableHead"),c=l.forwardRef((e,t)=>{let{children:s,className:n}=e,c=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("thead",Object.assign({ref:t,className:(0,r.q)(i("root"),"text-left","text-tremor-content","dark:text-dark-tremor-content",n)},c),s))});c.displayName="TableHead"},56760:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("TableRow"),c=l.forwardRef((e,t)=>{let{children:s,className:n}=e,c=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("tr",Object.assign({ref:t,className:(0,r.q)(i("row"),n)},c),s))});c.displayName="TableRow"},79043:function(e,t,s){"use strict";s.d(t,{i:function(){return a.Z},r:function(){return l.Z}});var a=s(68114),l=s(77832)},26295:function(e,t,s){Promise.resolve().then(s.bind(s,41522))},41522:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Vaults}});var a=s(57437),l=s(91056),n=s(72009),r=s(99057),i=s(20373),c=s(79043),d=s(16691),o=s.n(d),m=s(2265),u=s(81628),x=s(31851),f=s(75646),h=s(63326),b=s(68938),v=s(56760),j=s(64020);function NetValue(e){let{asset:t}=e,{prices:s,vaultsState:c}=(0,m.useContext)(r.FetcherContext),d=n.iK[(0,l.BV)()][0],N=(0,u.ok)(s,"".concat(t,"x")),g=c[d.vault],k=Math.max(0,1+1/((0,u.pF)((0,u.ok)(g,"aar"),(0,u.ok)(g,"AARDecimals"))-1));return(0,a.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,a.jsx)(j.C,{children:"The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies."}),(0,a.jsxs)(x.Z,{className:"mt-4 text-sm font-normal",children:[(0,a.jsx)(b.Z,{}),(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)(h.Z,{className:"flex gap-2 px-0",children:[(0,a.jsx)(o(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,a.jsx)(h.Z,{children:"Universal Stable Basis"}),(0,a.jsx)(h.Z,{}),(0,a.jsx)(h.Z,{className:"text-right",children:"$1"})]}),(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)(h.Z,{className:"flex gap-2 px-0",children:[(0,a.jsx)(o(),{src:"/".concat(t+"x",".svg"),width:20,height:20,alt:"ETHx"}),t,"x"]}),(0,a.jsxs)(h.Z,{children:[(0,a.jsxs)("span",{className:"text-base text-slate-700",children:[k.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,a.jsx)(h.Z,{}),(0,a.jsxs)(h.Z,{className:"text-right",children:["$",(0,i.dq)(N)]})]})]})]})]})}var N=s(76036),g=s(80547),k=s(1150),y=s(90228),S=s(8580),T=s(34522),p=s(41697),w=s(35769),A=s(79352),B=s(56926);let U="$USB";function VaultCard(e){let{asset:t}=e,{balances:s,prices:c,vaultsMode:d}=(0,m.useContext)(r.FetcherContext),o=n.iK[(0,l.BV)()].find(e=>e.assetTokenSymbol==t),x=n.jX[(0,l.BV)()],f=d[o.assetTokenSymbol],[h,b]=(0,m.useState)("mint"),[v,j]=(0,m.useMemo)(()=>{let e="mint"==h;return 3==f?["Adjustment Model--High AAR",e?"Minting ".concat(U," alone is feasible"):"Redeeming ".concat(o.xTokenSymbol," alone is feasible")]:2==f?["Adjustment Model--Low AAR",e?"Minting ".concat(o.xTokenSymbol," alone is feasible"):"Redeeming ".concat(U," alone is feasible")]:["Stability Model",e?"".concat(U," and ").concat(o.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(U," and ").concat(o.xTokenSymbol)]},[f,o,h]),[Z,R]=(0,m.useState)(""),[E,q]=(0,m.useState)(""),[C,M]=(0,m.useState)(""),V=(0,u.ok)(c,o.assetTokenSymbol),P=(0,u.ok)(c,o.xTokenSymbol),_=(0,m.useMemo)(()=>(0,u.ok)(null==s?void 0:s.find(e=>e.symbol===t),"balance"),[s]),H=(0,m.useMemo)(()=>(0,u.ok)(null==s?void 0:s.find(e=>"USB"===e.symbol),"balance"),[s]),F=(0,m.useMemo)(()=>(0,u.ok)(null==s?void 0:s.find(e=>e.symbol===t+"x"),"balance"),[s]),[L,O]=(0,m.useState)(""),[W,$]=(0,m.useState)(""),[z,K]=(0,m.useState)("USB"),{data:[D,X,Y]=[void 0,void 0,void 0]}=(0,B.Dm)({contracts:[{abi:y.Z,address:x,functionName:f>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[o.vault,(0,u.su)(Z||"0")]},{abi:y.Z,address:x,functionName:"calcMintUsbAboveAARU",args:[o.vault,(0,u.su)(Z||"0")]},{abi:y.Z,address:x,functionName:"calcMintLeveragedTokensBelowAARS",args:[o.vault,(0,u.su)(Z||"0")]}],watch:!0,enabled:"mint"==h}),I=(0,u.ok)(D,["result",1]),G=(0,u.ok)(D,["result",2]),J=(0,u.ok)(X,["result",1]),Q=(0,u.ok)(Y,["result",1]),{data:[ee,et,es,ea]=[void 0,void 0,void 0,void 0]}=(0,B.Dm)({contracts:[{abi:y.Z,address:x,functionName:"calcPairdLeveragedTokenAmount",args:[o.vault,(0,u.su)(E||"0")]},{abi:y.Z,address:x,functionName:"calcPairedUsbAmount",args:[o.vault,(0,u.su)(C||"0")]},{abi:y.Z,address:x,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[o.vault,(0,u.su)(C||"0")]},{abi:y.Z,address:x,functionName:"calcRedeemByUsbBelowAARS",args:[o.vault,(0,u.su)(E||"0")]}],watch:!0,enabled:"redeem"==h}),el=(0,u.ok)(ee,["result"]),en=(0,u.ok)(et,["result"]),er=(0,u.ok)(es,["result",1]),ei=(0,u.ok)(ea,["result",1]),ec=W==o.xTokenSymbol,ed="USB"==W,eo=(0,m.useMemo)(()=>{let e={abi:k.Z,address:o.vault,args:[(0,u.su)(Z)],value:o.assetTokenAddress==n.K8?(0,u.su)(Z):0n,functionName:"mintPairsAtAdjustmentPhase"};return f<=1&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==L&&(e.functionName="mintUSBAboveAARU"),L==o.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[f,L,Z,o]),em=(0,m.useMemo)(()=>{console.info("redeem:",f,W,E,(0,u.su)(E));let e={abi:k.Z,address:o.vault,functionName:"USB"==W?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==W?[(0,u.su)(E)]:[(0,u.su)(C)]};return W==o.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,u.su)(C)]),"USB"==W&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,u.su)(E)]),e},[f,W,E,C,o]),eu=L==o.xTokenSymbol?0n:"USB"===L?J:I,ex="USB"==L?0n:L===o.xTokenSymbol?Q:G,ef=ec?"0":"USB"==z?E:(0,A.d)(en),eh=ed?"0":z==o.xTokenSymbol?C:(0,A.d)(el),{data:eb}=(0,B.do)({watch:!0,abi:y.Z,address:x,functionName:"calcPairedRedeemAssetAmount",args:[o.vault,(0,u.su)(eh||"0")]}),ev=ec?er:ed?ei:(0,u.ok)(eb,[1]);return(0,a.jsxs)("div",{className:(0,w.m)("card relative",f>1?"!bg-violet-500/10":""),children:[(0,a.jsxs)("div",{className:"mb-1 ssm:mb-0 ssm:absolute top-[29px] right-6 flex flex-col items-end",children:[(0,a.jsxs)("div",{className:(0,w.m)("text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit"),children:[(0,a.jsx)("div",{className:(0,w.m)("w-3 h-3 rounded-full","Stability Model"==v?"bg-green-500":"bg-red-500")}),(0,a.jsx)("div",{className:(0,w.m)("Stability Model"==v?"text-green-500":"text-red-500"),children:v})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:j})]}),(0,a.jsx)("div",{className:"relative flex items-center justify-between",children:(0,a.jsxs)(T.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>b(e),children:[(0,a.jsxs)(T.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,a.jsx)(T.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,a.jsx)(T.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,a.jsx)(T.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(g.W,{asset:t,exchange:(0,i.dq)(V*(0,u.su)(Z)/S.Pq),balance:_,amount:Z,setAmount:R}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,a.jsx)(p.gPZ,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.W,{amount:(0,i.ZM)(eu),onClick:()=>{O(3==f?"USB":"")},asset:"USB",exchange:(0,i.dq)(eu),readonly:!0,disable:f<=1,selected:"USB"===L}),(0,a.jsx)(g.W,{amount:(0,i.ZM)(ex),onClick:()=>{O(2==f?o.xTokenSymbol:"")},asset:o.xTokenSymbol,exchange:(0,i.dq)(P*ex/S.Pq),readonly:!0,disable:f<=1,selected:L===o.xTokenSymbol})]}),(0,a.jsx)(N.v,{tx:"Mint",disabled:(0,u.su)(Z)>_,onTxSuccess:()=>{R("")},config:eo,approves:{[o.assetTokenAddress]:(0,u.su)(Z)},spender:o.vault})]})}),(0,a.jsx)(T.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.W,{amount:ef,setAmount:q,balance:H,onClick:()=>{$(2==f?"USB":""),K("USB")},asset:"USB",exchange:(0,i.dq)((0,u.su)(ef)),readonly:W==o.xTokenSymbol,selected:"USB"===W}),(0,a.jsx)(g.W,{amount:eh,setAmount:M,asset:o.xTokenSymbol,onClick:()=>{$(3==f?o.xTokenSymbol:""),K(o.xTokenSymbol)},exchange:(0,i.dq)((0,u.su)(eh)*P/S.Pq),balance:F,readonly:"USB"==W,selected:W===o.xTokenSymbol})]}),(0,a.jsxs)("div",{className:"flex w-full items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 ",children:(0,a.jsx)(p.gPZ,{})}),(0,a.jsx)("div",{className:"flex-1 text-sm text-slate-400 text-end",children:"Redemption Fee: 0.5%"})]}),(0,a.jsx)("div",{className:"w-full text-end"}),(0,a.jsx)(g.W,{asset:o.assetTokenSymbol,amount:(0,i.dq)(ev),exchange:(0,i.dq)(V*ev/S.Pq),readonly:!0}),(0,a.jsx)(N.v,{tx:"Redeem",config:em,disabled:(0,u.su)(ef)>H||(0,u.su)(eh)>F,onTxSuccess:()=>{console.info("Redeem onSuccess:"),q(""),M(""),$(""),K("USB")},approves:ed?{[n.O1[(0,l.BV)()]]:(0,u.su)(E)}:ec?{[o.xTokenAddress]:(0,u.su)(C)}:{[o.xTokenAddress]:(0,u.su)(C),[n.O1[(0,l.BV)()]]:(0,u.su)(E)},spender:o.vault})]})})]})})]})}function VaultNetToken(e){let{vc:t,showX:s}=e,l=s?t.xTokenSymbol:t.assetTokenSymbol,{prices:n}=(0,m.useContext)(r.FetcherContext),c=(0,i.dq)(n[l])||"1";return(0,a.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)(o(),{width:32,height:32,src:"/".concat(l,".svg"),alt:"token"}),(0,a.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:l})]}),(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"text-lg",children:["$",c]})})]})}function Vaults(){let{aar:e,assetLocked:t,prices:s}=(0,m.useContext)(r.FetcherContext),d=n.iK[(0,l.BV)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,a.jsxs)("div",{className:"w-full max-w-screen-xl px-4 mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,a.jsxs)(c.r,{numItemsMd:2,className:"gap-3 mt-4",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,a.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(VaultNetToken,{vc:d}),(0,a.jsx)(VaultNetToken,{vc:d,showX:!0})]})}),(0,a.jsx)(c.i,{}),(0,a.jsxs)("div",{className:"w-full flex justify-between",children:[(0,a.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,a.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,a.jsx)(o(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,a.jsxs)("div",{children:[(0,i.dq)(t.ETH),(0,a.jsxs)("span",{children:["(~$",(0,i.dq)((0,u.ok)(t,"ETH")*(0,u.ok)(s,"ETH")/S.Pq),")"]})]})]})]}),(0,a.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,a.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,a.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,a.jsxs)("div",{children:[(100*(e.ETH||0)).toFixed(),"%"]})})]})]}),(0,a.jsx)(NetValue,{asset:"ETH"})]}),(0,a.jsx)(VaultCard,{asset:"ETH"})]})]})}},64020:function(e,t,s){"use strict";s.d(t,{C:function(){return Tip}});var a=s(57437),l=s(75224),n=s(71824);function Tip(e){let{children:t}=e;return(0,a.jsx)(l.zt,{children:(0,a.jsxs)(l.fC,{children:[(0,a.jsx)(l.xz,{asChild:!0,children:(0,a.jsx)("div",{className:"inline-block px-1",style:{verticalAlign:"text-bottom"},children:(0,a.jsx)(n.if7,{className:"inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:[t,(0,a.jsx)(l.Eh,{})]})})]})})}}},function(e){e.O(0,[27,33,61,986,149,725,818,602,857,203,975,971,472,744],function(){return e(e.s=26295)}),_N_E=e.O()}]);