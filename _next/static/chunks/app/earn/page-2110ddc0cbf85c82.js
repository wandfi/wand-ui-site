(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{38946:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(55731),i=a(64103),s=a(86960),r=a(52100),l=a(13012),o=a(40460);let d=(0,l.fn)("Divider"),c=i.forwardRef((e,t)=>{let{className:a}=e,l=(0,n.__rest)(e,["className"]);return i.createElement("div",Object.assign({ref:t,className:(0,o.q)(d("root"),"w-full mx-auto","bg-tremor-background-subtle","dark:bg-dark-tremor-background-subtle",s.N.threeXs.height,r.W.threeXl.marginTop,r.W.threeXl.marginBottom,a)},l))});c.displayName="Divider"},86960:function(e,t,a){"use strict";a.d(t,{N:function(){return n}});let n={none:{height:"h-0",width:"w-0"},threeXs:{height:"h-0.5",width:"w-0.5"},twoXs:{height:"h-1",width:"w-1"},xs:{height:"h-2",width:"w-2"},sm:{height:"h-3",width:"w-3"},md:{height:"h-4",width:"w-4"},lg:{height:"h-5",width:"w-5"},xl:{height:"h-6",width:"w-6"},twoXl:{height:"h-7",width:"w-7"},threeXl:{height:"h-9",width:"w-9"}}},52100:function(e,t,a){"use strict";a.d(t,{W:function(){return n}});let n={none:{paddingLeft:"pl-0",paddingTop:"pt-0",paddingRight:"pr-0",paddingBottom:"pb-0",paddingX:"px-0",paddingY:"py-0",paddingAll:"p-0",marginLeft:"ml-0",marginTop:"mt-0",marginRight:"mr-0",marginBottom:"mb-0",negativeMarginLeft:"-ml-0",negativeMarginRight:"-mr-0",negativeMarginTop:"-mt-0",negativeMarginBottom:"-mb-0",left:"left-0",right:"right-0",top:"top-0",bottom:"bottom-0",spaceX:"space-x-0"},px:{paddingLeft:"pl-px",paddingTop:"pt-px",paddingRight:"pr-px",paddingBottom:"pb-px",paddingX:"px-px",paddingY:"py-px",paddingAll:"p-px",marginLeft:"ml-px",marginTop:"mt-px",marginRight:"mr-px",marginBottom:"mb-px",negativeMarginLeft:"-ml-px",negativeMarginRight:"-mr-px",negativeMarginTop:"-mt-px",negativeMarginBottom:"-mb-px",left:"left-px",right:"right-px",top:"top-px",bottom:"bottom-px",spaceX:"space-x-px"},threeXs:{paddingLeft:"pl-0.5",paddingTop:"pt-0.5",paddingRight:"pr-0.5",paddingBottom:"pb-0.5",paddingX:"px-0.5",paddingY:"py-0.5",paddingAll:"p-0.5",marginLeft:"ml-0.5",marginTop:"mt-0.5",marginRight:"mr-0.5",marginBottom:"mb-0.5",negativeMarginLeft:"-ml-0.5",negativeMarginRight:"-mr-0.5",negativeMarginTop:"-mt-0.5",negativeMarginBottom:"-mb-0.5",left:"left-0.5",right:"right-0.5",top:"top-0.5",bottom:"bottom-0.5",spaceX:"space-x-0.5"},twoXs:{paddingLeft:"pl-1",paddingTop:"pt-1",paddingRight:"pr-1",paddingBottom:"pb-1",paddingX:"px-1",paddingY:"py-1",paddingAll:"p-1",marginLeft:"ml-1",marginTop:"mt-1",marginRight:"mr-1",marginBottom:"mb-1",negativeMarginLeft:"-ml-1",negativeMarginRight:"-mr-1",left:"left-1",right:"right-1",top:"top-1",bottom:"bottom-1",spaceX:"space-x-1"},xs:{paddingLeft:"pl-1.5",paddingTop:"pt-1.5",paddingRight:"pr-1.5",paddingBottom:"pb-1.5",paddingX:"px-1.5",paddingY:"py-1.5",paddingAll:"p-1.5",marginLeft:"ml-1.5",marginTop:"mt-1.5",marginRight:"mr-1.5",marginBottom:"mb-1.5",negativeMarginLeft:"-ml-1.5",negativeMarginRight:"-mr-1.5",negativeMarginTop:"-mt-1.5",negativeMarginBottom:"-mb-1.5",left:"left-1.5",right:"right-1.5",top:"top-1.5",bottom:"bottom-1.5",spaceX:"space-x-1.5"},sm:{paddingLeft:"pl-2",paddingTop:"pt-2",paddingRight:"pr-2",paddingBottom:"pb-2",paddingX:"px-2",paddingY:"py-2",paddingAll:"p-2",marginLeft:"ml-2",marginTop:"mt-2",marginRight:"mr-2",marginBottom:"mb-2",negativeMarginLeft:"-ml-2",negativeMarginRight:"-mr-2",negativeMarginTop:"-mt-2",negativeMarginBottom:"-mb-2",left:"left-2",right:"right-2",top:"left-2",bottom:"bottom-2",spaceX:"space-x-2"},md:{paddingLeft:"pl-2.5",paddingTop:"pt-2.5",paddingRight:"pr-2.5",paddingBottom:"pb-2.5",paddingX:"px-2.5",paddingY:"py-2.5",paddingAll:"p-2.5",marginLeft:"ml-2.5",marginTop:"mt-2.5",marginRight:"mr-2.5",marginBottom:"mb-2.5",negativeMarginLeft:"-ml-2.5",negativeMarginRight:"-mr-2.5",negativeMarginTop:"-mt-2.5",negativeMarginBottom:"-mb-2.5",left:"left-2.5",right:"right-2.5",top:"top-2.5",bottom:"bottom-2.5",spaceX:"space-x-2.5"},lg:{paddingLeft:"pl-3",paddingTop:"pt-3",paddingRight:"pr-3",paddingBottom:"pb-3",paddingX:"px-3",paddingY:"py-3",paddingAll:"p-3",marginLeft:"ml-3",marginTop:"mt-3",marginRight:"mr-3",marginBottom:"mb-3",negativeMarginLeft:"-ml-3",negativeMarginRight:"-mr-3",negativeMarginTop:"-mt-3",negativeMarginBottom:"-mb-3",left:"left-3",right:"right-3",top:"top-3",bottom:"bottom-3",spaceX:"space-x-3"},xl:{paddingLeft:"pl-3.5",paddingTop:"pt-3.5",paddingRight:"pr-3.5",paddingBottom:"pb-3.5",paddingX:"px-3.5",paddingY:"py-3.5",paddingAll:"p-3.5",marginLeft:"ml-3.5",marginTop:"mt-3.5",marginRight:"mr-3.5",marginBottom:"mb-3.5",negativeMarginLeft:"-ml-3.5",negativeMarginRight:"-mr-3.5",negativeMarginTop:"-mt-3.5",negativeMarginBottom:"-mb-3.5",left:"left-3.5",right:"right-3.5",top:"top-3.5",bottom:"bottom-3.5",spaceX:"space-x-3.5"},twoXl:{paddingLeft:"pl-4",paddingTop:"pt-4",paddingRight:"pr-4",paddingBottom:"pb-4",paddingX:"px-4",paddingY:"py-4",paddingAll:"p-4",marginLeft:"ml-4",marginTop:"mt-4",marginRight:"mr-4",marginBottom:"mb-4",negativeMarginLeft:"-ml-4",negativeMarginRight:"-mr-4",negativeMarginTop:"-mt-4",negativeMarginBottom:"-mb-4",left:"left-4",right:"right-4",top:"top-4",bottom:"bottom-4",spaceX:"space-x-4"},threeXl:{paddingLeft:"pl-6",paddingTop:"pt-6",paddingRight:"pr-6",paddingBottom:"pb-6",paddingX:"px-6",paddingY:"py-6",paddingAll:"p-6",marginLeft:"ml-6",marginTop:"mt-6",marginRight:"mr-6",marginBottom:"mb-6",negativeMarginLeft:"-ml-6",negativeMarginRight:"-mr-6",negativeMarginTop:"-mt-6",negativeMarginBottom:"-mb-6",left:"left-6",right:"right-6",top:"top-6",bottom:"bottom-6",spaceX:"space-x-6"},fourXl:{paddingLeft:"pl-8",paddingTop:"pt-8",paddingRight:"pr-8",paddingBottom:"pb-8",paddingX:"px-8",paddingY:"py-8",paddingAll:"p-8",marginLeft:"ml-8",marginTop:"mt-8",marginRight:"mr-8",marginBottom:"mb-8",negativeMarginLeft:"-ml-8",negativeMarginRight:"-mr-8",negativeMarginTop:"-mt-8",negativeMarginBottom:"-mb-8",left:"left-8",right:"right-8",top:"top-8",bottom:"bottom-8",spaceX:"space-x-8"}}},62600:function(e,t,a){"use strict";a.d(t,{r:function(){return n.Z}});var n=a(62653)},27777:function(e,t,a){Promise.resolve().then(a.bind(a,97052))},97052:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return EarnPage}});var n=a(31113),i=a(26504),s=a(19757),r=a(22139),l=a(59175),o=a(45438),d=a(64103);let c={};var m=a(15506),p=a(78354),g=a(26361),u=a(75930),x=a(84944),h=a(38946),f=a(62653),b=a(33501),v=a(41690),k=a.n(v),j=a(53060),T=a(72366),w=a(99548),y=a(35664),N=a(91214),A=a(33621),S=a(36762),R=a(6371),B=a(2794),M=a(15948);function WrapDiv(e){let{children:t,wrap:a,...i}=e;return a?(0,n.jsx)("div",{...i,children:t}):t}function FmtPercent(e){let{className:t,value:a,decimals:i,showDecimals:s=2,plusI0:r=!0}=e,l=0n==a?0n:a||0n,o=r?l>=0n:l>0n,d=null==a||void 0==a||"bigint"!=typeof a;return(0,n.jsx)("span",{className:(0,g.cn)(t,o?"text-green-600":"text-red-600"),children:d?"-%":(0,n.jsxs)(n.Fragment,{children:[o&&"+",(0,g.Jh)(l,i,s)]})})}var C=a(73216);function TokenValue(e){let{symbol:t,value:a,decimals:i}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(k(),{className:"inline-block",alt:"usb",width:16,height:16,src:"/".concat(t,".svg")}),(0,x.dq)(a,i)]})}function DualTokenCard(e){let{type:t,vc:a}=e,v="buy"==t,k=(0,l.p)(),E=v?s.O1[k]:a.assetTokenAddress,L=v?a.assetTokenAddress:a.xTokenAddress,P=v?"USB":a.assetTokenSymbol,_=v?a.assetTokenSymbol:"USB",D=v?"Buy ".concat(a.assetTokenSymbol," Low"):"Sell ".concat(a.assetTokenSymbol," High"),X=v?a.ptyPoolBelowAddress:a.ptyPoolAboveAddress,{prices:F,balances:U,earns:z,vaultsState:I,assetLocked:Y,vaultUSBTotal:q,usbApr:H}=(0,d.useContext)(u.g),V=I[a.vault],W=z[X],{address:Z}=(0,T.m)(),O=U[E],[J,K]=(0,d.useState)(""),$=(0,g.su)(J),G=v?a.xTokenSymbol:a.assetTokenSymbol,Q=v?a.assetTokenSymbol:a.xTokenSymbol;(0,d.useMemo)(()=>W.totalStake*(0,g.ok)(F,E,r.Pq)/r.Pq,[F[E],W.totalStake]);let ee=v?null==V?void 0:V.AARS:null==V?void 0:V.AARU,et=(0,g.ok)(Y,a.assetTokenAddress),ea=(0,g.ok)(q,a.vault),en=(0,d.useMemo)(()=>ee&&V.AARDecimals&&0n!=et&&0n!=ea?ee*ea*r.Pq/V.AARDecimals/et/BigInt(1e9):(0,g.ok)(F,a.assetTokenAddress),[ee,ea,V.AARDecimals,et]),ei=v?"Stake $USB, and when the ".concat(a.assetTokenSymbol," price falls to the target, it will trigger the purchase of ").concat(a.assetTokenSymbol," with staked $USB."):"Stake ".concat(a.assetTokenSymbol,", and when the ").concat(a.assetTokenSymbol," price rises to the target, staked ").concat(a.assetTokenSymbol," will be sold."),es=(0,m.D2)({abi:i.aT,address:X,functionName:"getAccruedMatchingYields"}),er=(0,g.ok)(es,"data"),el=(0,d.useMemo)(()=>{let e=(0,g.ok)(W,"totalStake");if(0n==e||0n==F[E])return"0.00%";let t=10n**(V.AARDecimals||10n),a=(V.AART-t)*en;if(0n==a)return"0.00%";let n=v?(V.AART*V.M_USB_ETH*r.Pq-V.M_ETH*en*t)/(V.AART-t)/r.Pq:(V.M_ETH*en*t-V.AART*V.M_USB_ETH*r.Pq)/a;return e=(0,g.NA)([e,n]),(0,g.Jh)(er*F[L]*r.Pq/(e*F[E]),18,3)},[W.totalStake,er,L,E,F[L],F[E],v]),eo=(0,o.i)(),ed=(0,g.ok)(eo[X],"staking"),ec=F[a.assetTokenAddress]>0&&en>0n?v?(F[a.assetTokenAddress]-en)*10n**10n/F[a.assetTokenAddress]:(en-F[a.assetTokenAddress])*10n**10n/F[a.assetTokenAddress]:0n,em=(0,d.useMemo)(()=>{let e=10n**(V.AARDecimals||10n),t=(V.AART-e)*en/e;if(0n==t)return 0n;if(v){let a=(V.AART*V.M_USB_ETH*r.Pq-V.M_ETH*en*e)/e/t,n=a*en/r.Pq,i=W.stake,s=W.totalStake>n&&n>=0n?i*n/W.totalStake:i;return s}{let a=(V.M_ETH*en*e-V.AART*V.M_USB_ETH*r.Pq)/e/t,n=W.stake,i=W.totalStake>a&&a>=0n?n*a/W.totalStake:n;return i}},[W,V,v,en]),ep=(0,d.useMemo)(()=>{let e=v?[{key:"eth_price",label:"ETH Price",value:(0,x.dq)(F[a.assetTokenAddress])},{key:"target_price",label:"Target Price",value:(0,n.jsxs)("div",{children:[(0,x.dq)(en)," (",(0,n.jsx)(FmtPercent,{value:ec<0n?void 0:-ec,decimals:10,plusI0:!1}),")"]}),groupEnd:!0},{key:"apr_interest",label:"APY",value:(0,g.Jh)(H.apr+ed,H.aprDecimals,2),detail:(0,n.jsxs)("div",{className:"pl-2",children:[(0,n.jsxs)("div",{children:["~USB Interest: ",(0,g.Jh)(H.apr,H.aprDecimals,2)]}),(0,n.jsxs)("div",{children:["~",G," Yield: ",(0,g.Jh)(ed,H.aprDecimals,2)]})]}),groupEnd:!0},{key:"transacation_reward_pool",label:"Reward Pool",tip:"The reward funds originates from protocol, and when a purchase action is triggered, these funds will be distributed proportionally.",value:(0,n.jsx)(TokenValue,{symbol:Q,value:er})},{key:"discount_rate",label:"Reward Rate",tip:"This is an estimated value, to be determined upon triggering. Reward Rate =Reward/Transaction volume",value:"".concat(el," (Est.)")}]:[{key:"eth_price",label:"ETH Price",value:(0,x.dq)(F[a.assetTokenAddress])},{key:"target_price",label:"Target Price",value:(0,n.jsxs)("div",{children:[(0,x.dq)(en)," (",(0,n.jsx)(FmtPercent,{value:ec<0n?void 0:ec,decimals:10,plusI0:!0}),")"]}),groupEnd:!0},{key:"apr_yield",label:"APY(".concat(G," Yield)"),value:(0,g.Jh)(ed,H.aprDecimals,2),groupEnd:!0},{key:"transacation_reward_pool",label:"Reward Pool",tip:"The reward funds originates from protocol, and when a sell action is triggered, these funds will be distributed proportionally.",value:(0,n.jsx)(TokenValue,{symbol:Q,value:er})},{key:"discount_rate",label:"Reward Rate",tip:"This is an estimated value, to be determined upon triggering. Reward Rate =Reward/Transaction volume",value:"".concat(el," (Est.)")}];return e},[W,er]),eg=(0,d.useMemo)(()=>{let e=v?[{key:"successfully_brought",label:"Successfully Bought",value:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(TokenValue,{symbol:_,value:W.match}),(0,n.jsx)("span",{children:"+"}),(0,n.jsx)(TokenValue,{symbol:Q,value:W.earnForMatch}),(0,n.jsx)(R.C,{inFlex:!0,children:"From Reward Pool"})]})},{key:"staking_earend",label:"".concat(G," Earned"),value:(0,n.jsx)(TokenValue,{symbol:G,value:W.earn})}]:[{key:"successfully_sold",label:"Successfully Sold",value:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(TokenValue,{symbol:_,value:W.match}),(0,n.jsx)("span",{children:"+"}),(0,n.jsx)(TokenValue,{symbol:Q,value:W.earnForMatch}),(0,n.jsx)(R.C,{inFlex:!0,children:"From Reward Pool"})]})}];return e},[W,_,G,Q]),{write:eu,isDisabled:ex,isLoading:eh}=(0,p.R)({abi:i.aT,address:X,functionName:"claimAll"}),ef=function(e){let t=(0,d.useRef)(null);return c[e]&&c[e].includes(t)||(c[e]=[...c[e]||[],t]),(0,d.useEffect)(()=>{if(!t.current)return()=>{};let onResize=()=>{let a=c[e]||[],n=a.reduce((e,t)=>{var a;return Math.max((null===(a=t.current)||void 0===a?void 0:a.clientHeight)||0,e)},0);a.filter(e=>e!=t).forEach(e=>{var t;let a=(null===(t=e.current)||void 0===t?void 0:t.clientHeight)||0;a!==n&&n>0&&e.current&&(e.current.style.height="".concat(n,"px"))})};return window.addEventListener("resize",onResize),onResize(),()=>{window.removeEventListener("resize",onResize)}},[t.current]),t}(a.vault),eb=(0,B.IS)();eb.find(e=>e.symbol==P);let[ev,ek]=(0,M.n)(e=>{let{width:t}=e;return t<512});return(0,n.jsxs)("div",{className:"card flex flex-col",ref:ev,children:[(0,n.jsxs)("div",{className:"flex gap-5 items-center justify-between",ref:ef,children:[(0,n.jsxs)("div",{className:"flex gap-3 md:gap-5 items-center",children:[(0,n.jsxs)("div",{className:"relative w-fit shrink-0",children:[(0,n.jsx)(A.c,{size:32,symbol:P,className:"md:hidden"}),(0,n.jsx)(A.c,{size:40,symbol:P,className:"hidden md:block"}),(0,n.jsx)(A.c,{size:16,symbol:_,className:"absolute -right-1 -bottom-1 md:hidden"}),(0,n.jsx)(A.c,{size:24,symbol:_,className:"absolute -right-2 -bottom-2 hidden md:block"})]}),(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("h6",{className:"page-sub",children:D||"title"}),(0,n.jsx)(R.C,{children:ei})]})})]}),(0,n.jsx)(WrapDiv,{wrap:ek,className:"flex flex-col-reverse gap-1 items-end",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-xs text-black dark:text-slate-50 font-medium text-right",children:["Total ",P," Staked"]}),(0,n.jsx)("div",{className:"text-base text-black dark:text-slate-50 text-end font-semibold",children:(0,x.dq)(W.totalStake)})]})})]}),(0,n.jsx)(h.Z,{className:"my-4 h-[1px] dark:bg-zinc-600 "}),(0,n.jsxs)(f.Z,{numItemsSm:2,className:"gap-x-2 flex-1",children:[(0,n.jsx)(f.Z,{numItemsSm:1,className:"gap-y-2 gap-x-7 md:border-r-[1px] border-[#E4E4E7] dark:border-zinc-600 mb-3 md:mb-0 ",children:null==ep?void 0:ep.map(e=>(0,n.jsxs)("div",{className:(0,b.Z)("flex flex-col text-sm",{"mb-4":e.groupEnd}),children:[(0,n.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,n.jsxs)("div",{className:"text-black dark:text-slate-50 font-medium mr-[5px]",children:[e.label," : ",e.tip&&(0,n.jsx)(R.C,{children:e.tip})]}),(0,n.jsx)("div",{className:"text-neutral-900 dark:text-slate-50 ml-2",children:e.value})]}),e.detail]},e.key))}),Z&&(0,n.jsxs)(f.Z,{numItemsSm:1,className:"gap-x-1",children:[(0,n.jsx)("div",{className:"w-full border-t-[1px] border-[#E4E4E7] dark:border-zinc-600 md:border-0 md:px-[0px]",children:null==eg?void 0:eg.map(e=>(0,n.jsxs)("div",{className:"flex items-center flex-wrap mt-[8px] md:mt-0 md:mb-2",children:[(0,n.jsxs)("div",{className:"text-xs text-black dark:text-slate-50 whitespace-nowrap font-medium mr-[5px]",children:[e.label," :"]}),(0,n.jsx)("div",{className:"text-neutral-900 dark:text-slate-50 text-sm shrink-0 ml-2",children:e.value})]},e.key))}),(0,n.jsxs)("div",{className:"mt-auto h-fit",children:[(0,n.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,n.jsxs)("button",{className:"btn-primary px-4 h-7 flex items-center w-[60%] md:w-fit self-end justify-center gap-4 bg-[#64738B]",disabled:ex||eh,onClick:()=>eu(),children:[eh&&(0,n.jsx)(S.$,{}),"Claim All"]})}),(0,n.jsxs)("div",{className:"relative flex flex-col gap-1 mt-4 md:mt-[28px] justify-center items-center text-[#64748B] text-sm font-medium p-3 rounded-md bg-slate-100 dark:bg-s1 dark:text-slate-50",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:["Staked",(0,n.jsx)(A.c,{symbol:P,size:16}),(0,x.dq)(W.stake),(0,n.jsx)("span",{className:"text-indigo-500 dark:text-violet-300 ml-[5px] cursor-pointer",onClick:()=>K((0,j.d)(W.stake)),children:"Max"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 pl-8",children:["-",(0,x.dq)(em),(0,n.jsxs)(R.C,{inFlex:!0,children:["This is the amount of staked ",P," that will be ",v?"spent":"sold"," when price triggers."]})]})]})]})]})]}),Z?(0,n.jsxs)("div",{className:"mt-4 md:mt-[30px]",children:[(0,n.jsx)(N.W,{amount:J,setAmount:K,asset:P,balance:O,checkBalance:!1}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(w.v,{tx:"Stake",disabled:$<=0n||$>O,onTxSuccess:()=>{K("")},config:{abi:i.aT,address:X,functionName:"stake",args:[$],value:P==(0,C.b)()?$:0n},className:"mt-2 w-[45%]",approves:{[E]:$},spender:X}),(0,n.jsx)(w.v,{className:"mt-2 w-[45%]",tx:"Withdraw",disabled:$<=0n||$>W.stake,onTxSuccess:()=>{K("")},config:{abi:i.aT,address:X,functionName:"withdraw",args:[$]}})]})]}):(0,n.jsx)("div",{className:"w-full flex items-center justify-center mt-[30px]",children:(0,n.jsx)(y.Z,{})})]})}function GroupDualTokenCard(e){let{vcs:t,type:a}=e,[i,s]=(0,d.useState)(t[t.length-1]);return 0==t.length?null:1==t.length?(0,n.jsx)(DualTokenCard,{vc:t[0],type:a}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(DualTokenCard,{vc:i,type:a}),(0,n.jsx)("div",{className:"absolute z-10 left-[86px] top-0 flex text-sm",children:t.map((e,t)=>(0,n.jsx)("div",{className:(0,b.Z)("cursor-pointer rounded-b-full border border-blue-500 px-1 py-1",{"bg-white text-black dark:text-slate-50":i!==e,"bg-blue-500 text-white":i===e}),onClick:()=>s(e),children:"V".concat(t+1)},"gdtc_"+t))})]})}var E=a(50553),L=a(62600);function EarnPage(){let e=(0,l.p)(),t=(0,d.useMemo)(()=>s.iK[e].filter(e=>!e.isStable),[e]);return(0,n.jsxs)("div",{className:"w-full h-full max-w-screen-xl px-4 mx-auto",children:[(0,n.jsx)(E.a,{}),(0,n.jsx)("h2",{className:"page-title",children:"Price Trigger Yield"}),(0,n.jsx)(L.r,{numItemsMd:2,className:"gap-3 mt-4",children:t.map((e,t)=>(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(GroupDualTokenCard,{vcs:[e],type:"buy"}),(0,n.jsx)(GroupDualTokenCard,{vcs:[e],type:"sell"})]},"dual_card_group_".concat(t)))})]})}},99548:function(e,t,a){"use strict";a.d(t,{v:function(){return ApproveAndTx}});var n=a(31113),i=a(19757),s=a(26361),r=a(64103),l=a(47259),o=a(22298),d=a(72366),c=a(9709),m=a(64040);let p={},useApproves=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10000000000n*10n**18n,{address:n,chainId:g}=(0,d.m)(),u=(0,c.t)(),{data:x}=(0,m.p)(),[h,f]=(0,r.useState)(!1),b=(0,r.useMemo)(()=>Object.keys(e).filter(e=>e!==i.K8),[e]),[v,k]=(0,r.useState)(t&&p[t]||{}),updateAllownce=(e,a)=>{t&&(p[t]={...p[t]||{},[e]:a},k(t=>({...t,[e]:a})))},j=(0,c.t)();(0,r.useEffect)(()=>{n&&t&&u&&g&&b.forEach(e=>{u.readContract({abi:o.Wo,address:e,functionName:"allowance",args:[n,t]}).then(t=>updateAllownce(e,t||0n)).catch(console.error)})},[b,g,n]);let[T,w]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>b.filter(t=>(0,s.ok)(e,t)>0n&&(0,s.ok)(e,t)>(0,s.ok)(v,t)),[e,b,v]),approve=async()=>{if(0!=y.length&&t)try{w(!0),f(!1);for(let n=0;n<y.length;n++){let i=y[n],s=!1===a?e[i]:a,r=await (null==x?void 0:x.writeContract({abi:o.Wo,address:i,functionName:"approve",args:[t,s]}));r&&await (null==j?void 0:j.waitForTransactionReceipt({hash:r})),updateAllownce(i,s)}l.A.success("Approve success"),w(!1),f(!0)}catch(e){throw l.A.error((0,s.az)(e)),w(!1),f(!1),e}};return{approve,loading:T,shouldApprove:y.length>0,isSuccess:h}};var g=a(78354),u=a(88501),x=a(36762);function ApproveAndTx(e){let{className:t,tx:a,approves:i,spender:s,requestAmount:l,config:o,toast:d=!0,disabled:c,onTxSuccess:m,onApproveSuccess:p}=e,{write:h,isDisabled:f,isLoading:b}=(0,g.R)(o,{onSuccess:()=>m&&m(),autoToast:d}),v=c||f||b||!1===o.enabled,{approve:k,shouldApprove:j,loading:T,isSuccess:w}=useApproves(i||{},s,l),y=(0,r.useRef)();return(y.current=p,(0,r.useEffect)(()=>{y.current&&w&&y.current()},[w]),j)?(0,n.jsxs)("button",{className:(0,u.m)("btn-primary flex items-center justify-center gap-4",t),onClick:k,disabled:c||!k||T,children:[T&&(0,n.jsx)(x.$,{}),"Approve"]}):(0,n.jsxs)("button",{className:(0,u.m)("btn-primary flex items-center justify-center gap-4",t),onClick:()=>h(),disabled:v,children:[b&&(0,n.jsx)(x.$,{}),a]})}},91214:function(e,t,a){"use strict";a.d(t,{W:function(){return AssetInput}});var n=a(31113),i=a(26361),s=a(84944),r=a(33501),l=a(64103),o=a(45631),d=a(7530),c=a(33621),m=a(12045);function AssetInput(e){let{asset:t="ETH",checkBalance:a=!0,balance:p,balanceTit:g="Balance",balanceDecimals:u=18,exchange:x,readonly:h,selected:f,onClick:b,amount:v,setAmount:k,price:j,disable:T,hasInput:w=!1,options:y,onChange:N=()=>{},defaultValue:A,balanceClassName:S="",disableNegative:R}=e,B=(0,l.useRef)(null),M=a&&void 0!==p&&(0,i.su)("number"==typeof v?v+"":v||"")>("bigint"==typeof p?p:0n),C=(0,m.l)(e=>"dark"==e.theme);return(0,n.jsxs)("div",{className:"relative w-full",onClick:()=>{b&&!T&&b()},children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute flex items-center h-fit gap-2 left-[48px] bottom-1 w-full  max-w-[calc(100%-56px)]",style:{pointerEvents:"none"},children:[j&&(0,n.jsx)("div",{className:"text-neutral-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:j}),x&&(0,n.jsxs)("div",{className:"text-slate-500 dark:text-slate-50/70 text-xs max-w-full overflow-hidden",children:["~$",x]})]}),(0,n.jsxs)("div",{className:"absolute flex items-center gap-2 w-fit top-1/2 left-4 -translate-y-1/2",children:[(0,n.jsx)(c.c,{size:24,symbol:t}),(0,n.jsx)("div",{className:(0,r.Z)("relative",j||x?"-top-[6px]":""),children:w?(0,n.jsx)(o.ZP,{options:y,onChange:N,defaultValue:A,styles:{control:(e,t)=>({...e,border:"0px",outline:"none",boxShadow:"none",borderRadius:"0px",minHeight:"24px",padding:"0px",background:"transparent"}),singleValue:(e,t)=>({...e,color:C?"#fff":"#000"}),valueContainer:(e,t)=>({...e,padding:"0px"}),menu:(e,t)=>({...e,margin:0,background:C?"#444":"#fff"}),option:(e,t)=>({...e,color:C?"#fff":"#000",background:C?"transparent":"#fff"}),menuPortal:(e,t)=>({...e,margin:0})}}):(0,n.jsx)("div",{children:t})})]}),(0,n.jsx)("input",{value:v,onChange:e=>{let t=(e.target.value||"").replaceAll("-","").replaceAll("+","");k(t)},ref:B,type:"number",disabled:T,className:(0,r.Z)(h?"bg-slate-50 cursor-not-allowed dark:bg-slate-800":"bg-white dark:bg-transparent",{"border-green-700 border-2":f,"border-red-400 !border-2 focus:border-red-400":M,"border-slate-400  focus:border-blue-400":!M&&!f},"w-full h-14 text-right pr-4 pl-[8rem] font-bold text-2xl border focus:border-2 text-slate-700 rounded-md outline-none dark:text-slate-50"),placeholder:"0.000",maxLength:36,pattern:"[0-9.]{36}",step:.01,title:"",readOnly:h})]}),void 0!=p&&(0,n.jsxs)("div",{className:"flex items-center justify-between mt-1 px-1 text-slate-400 dark:text-slate-50/70 text-sm",children:[(0,n.jsxs)("div",{className:S,children:[(0,n.jsxs)("span",{children:[g,": ",(0,s.Rp)(p,3,u)]}),(0,n.jsx)("button",{className:"text-indigo-500 dark:text-violet-300 ml-2",onClick:()=>{let e=(0,d.b)(p,u);k(e),b&&!T&&b()},children:"Max"})]}),(0,n.jsx)("div",{className:"text-sm text-red-400",children:M?"Insufficient account balance":""})]})]})}},2794:function(e,t,a){"use strict";a.d(t,{IS:function(){return useBlastPointsItems},aG:function(){return BlastPointCards}});var n=a(31113),i=a(26361),s=a(33621),r=a(73216),l=a(19757),o=a(90168),d=a(59175),c=a(15948),m=a(45438),p=a(47518),g=a(76034),u=a(75930),x=a(84944),h=a(64103),f=a(73083),b=a(84570),v=a(42341),k=a(12045);let j={USB:"rgba(226, 254, 182, 1)",USB_dark:"#E2FEB6",ETHx:"rgba(238, 234, 254, 1)",IPx:"rgba(238, 234, 254, 1)",ETHx_dark:"linear-gradient(90deg, #C2B7FD 0%, #746D97 100%)",IPx_dark:"linear-gradient(90deg, #C2B7FD 0%, #746D97 100%)",USDBx:"linear-gradient(90deg, rgba(16, 185, 129, 0.25) 0%, rgba(99, 102, 241, 0.25) 100%)",USDBx_dark:"linear-gradient(90deg, #C2B7FD 0%, #6366F1 100%)"},T={USB:"rgba(196, 241, 126, 1)",ETHx:"rgba(219, 210, 255, 1)",IPx:"rgba(219, 210, 255, 1)",USDBx:"rgba(255, 255, 255, 1)"};function useBlastPointsItems(){let e=(0,d.p)(),{prices:t,usbApr:a}=(0,h.useContext)(u.g),n=(0,g.a)(),s=(0,m.i)(),o=(0,p.m)(),c=(0,h.useMemo)(()=>{let a=[],s=l.iK[e];if(r.DF.find(t=>t.id==e)){let d=t[l.K8],c=t[l.O1[e]],calcPoint=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100n;return 0n==d?"0":(0,x.Rp)(6504987n*302400n*e*t/d,0,8)};a.push({symbol:"USB",tit:"APY:".concat((0,i.Jh)(o[l.O1[e]],10)," ~ ").concat((0,i.Jh)(o.USB_END,10)),sub:"~ Interest + Earning",point:calcPoint(c),per:100}),s.filter(e=>"USDB"==e.assetTokenSymbol||e.assetTokenSymbol==(0,r.b)()).forEach(e=>{let s=e.assetTokenSymbol==(0,r.b)()?"".concat((0,r.b)()," GAIN BOOSTER"):"APY:".concat((0,i.Jh)(o[e.xTokenAddress],10)),l=e.isStable&&(0,r.WA)()?"~ ".concat(n[e.vault].toFixed(2),"x Blast Native Yield"):"~ ".concat(n[e.vault].toFixed(2),"x Leveraged long on ").concat(e.assetTokenSymbol);a.push({symbol:e.xTokenSymbol,tit:s,sub:l,point:calcPoint(t[e.xTokenAddress],e.xTokenSymbol=="".concat((0,r.b)(),"x")?1n:100n),per:e.xTokenSymbol=="".concat((0,r.b)(),"x")?1:100})})}return a},[e,t,n,a,s]);return c}function BlastPointCard(e){let{symbol:t,tit:a,sub:c,point:m}=e,p=(0,d.p)(),g=(0,h.useMemo)(()=>{var e,a;let n=(0,o.l)(p,!1),s={USB:"USDB",["".concat((0,r.b)(),"x")]:(0,r.b)(),USDBx:"USDB"},d=null===(e=n.find(e=>e.symbol==s[t]))||void 0===e?void 0:e.address,c=null===(a=n.find(e=>e.symbol==t))||void 0===a?void 0:a.address;if(!d||!c)return"";let convertNative=e=>e==l.K8?"0x0000000000000000000000000000000000000000":e;return(0,i.h$)(convertNative(d),convertNative(c))},[p]),u=(0,k.l)(e=>e.theme);return(0,n.jsxs)("div",{style:{boxShadow:"0px 0px 12px 0px rgba(187, 215, 144, 0.4)"},className:"rounded-2xl overflow-hidden bg-white text-base flex flex-col dark:bg-slate-950",children:[(0,n.jsxs)("div",{className:"flex md:flex-wrap items-center p-4 gap-2 dark:text-black",style:{background:j["".concat(t,"_").concat(u)]||j[t]},children:[(0,n.jsx)(s.c,{symbol:t,size:42,className:"shrink-0"}),(0,n.jsx)("div",{className:"font-semibold",children:t}),(0,n.jsxs)("div",{className:"whitespace-nowrap text-center text-sm ml-auto flex flex-col items-center flex-1",children:[(0,n.jsx)("div",{className:"rounded-full px-2 py-[2px] w-fit",style:{background:T[t]},children:a}),(0,n.jsx)("div",{className:"mt-1",children:c})]})]}),(0,n.jsx)("div",{className:"flex justify-between p-4 whitespace-nowrap text-sm items-center gap-2",children:(0,n.jsxs)("a",{className:"underline text-slate-500 dark:text-slate-50 flex items-center gap-1",href:g,target:"_blank",children:["Swap on Thruster ",(0,n.jsx)(f.Ig3,{})]})})]})}function BlastPointCards(){let e=useBlastPointsItems(),[t,a]=(0,c.n)(e=>{let{width:t}=e;return t<970});return 0==e.length?null:(0,n.jsxs)("div",{ref:t,className:"grid grid-cols-1 md:grid-cols-3 gap-5 md:pb-[60px]",children:[!a&&e.map(e=>(0,n.jsx)(BlastPointCard,{...e},e.symbol)),a&&(0,n.jsx)(v.tq,{spaceBetween:20,pagination:{clickable:!0,renderBullet:function(e,t){return'<div class="'+t+'"></div>'}},className:"-translate-x-[1rem] !px-4 !pb-10 !w-screen",modules:[b.tl],children:e.map(e=>(0,n.jsx)(v.o5,{children:(0,n.jsx)(BlastPointCard,{...e})},e.symbol))})]})}},35664:function(e,t,a){"use strict";a.d(t,{Z:function(){return ConnectBtn}});var n=a(31113),i=a(28767),s=a(44726);function ConnectBtn(){return(0,s.Z)(1024),(0,n.jsx)(i.NL,{chainStatus:"none",showBalance:!1})}},12045:function(e,t,a){"use strict";a.d(t,{h:function(){return ThemeMode},l:function(){return d}});var n=a(31113),i=a(26361),s=a(64103),r=a(69426),l=a(48338),o=a(2987);let getThemeState=()=>{let e="light",t="light";return"dark"!==localStorage.theme&&("theme"in localStorage||!window.matchMedia("(prefers-color-scheme: dark)").matches)?(document.documentElement.classList.remove("dark"),e="light",t="light"):(document.documentElement.classList.add("dark"),e="dark",t="dark"),"theme"in localStorage||(e="system"),{themeMode:e,theme:t}},d=(0,l.Ue)(e=>({...getThemeState(),setThemeMode:t=>e(()=>({themeMode:t})),setTheme:t=>e(()=>({theme:t}))})),c={light:(0,n.jsx)(r.EWX,{}),dark:(0,n.jsx)(r.Dq,{}),system:(0,n.jsx)(r.pUp,{})};function ThemeMode(){let e=d(),onChangeTheme=()=>{let{theme:t,themeMode:a}=getThemeState();e.setTheme(t),e.setThemeMode(a)};(0,s.useEffect)(()=>{onChangeTheme()},[]);let onClick=e=>{"System"==e?localStorage.removeItem("theme"):localStorage.theme=e.toLocaleLowerCase(),onChangeTheme()};return(0,n.jsx)(o.o,{className:"max-w-[200px] py-10 flex flex-col text-base text-stone-500 dark:text-white",trigger:(0,n.jsx)("div",{className:"text-xl",children:c[e.theme]}),children:["Light","Dark","System"].map((t,a)=>(0,n.jsxs)("div",{className:(0,i.cn)("flex px-5 items-center py-2 gap-3 cursor-pointer",{"bg-stone-100 dark:bg-zinc-700":t.toLowerCase()==e.themeMode}),onClick:()=>onClick(t),children:[(0,n.jsx)("div",{className:"text-2xl",children:c[t.toLowerCase()]}),(0,n.jsx)("span",{className:"",children:t})]},"theme_mode_"+t))})}},6371:function(e,t,a){"use strict";a.d(t,{C:function(){return Tip}});var n=a(31113),i=a(26361),s=a(52653),r=a(66733);function Tip(e){let{children:t,node:a,className:l,inFlex:o}=e,d=document.getElementById("tooltip-root");return t?(0,n.jsx)(s.zt,{children:(0,n.jsxs)(s.fC,{children:[(0,n.jsx)(s.xz,{asChild:!0,onClickCapture:e=>{e.preventDefault(),e.stopPropagation()},children:a?(0,n.jsx)("div",{className:(0,i.cn)("inline-block cursor-default",l),style:{verticalAlign:"text-bottom"},children:a}):(0,n.jsx)("div",{className:(0,i.cn)(o?"flex":"translate-y-[-6%] inline-block"," px-[3px] cursor-default relative",l),children:(0,n.jsx)(r.apP,{className:"inline-block stroke-slate-500"})})}),(0,n.jsx)(s.h_,{container:d,children:(0,n.jsxs)(s.VY,{className:"max-w-xs text-sm text-white bg-slate-900 shadow-lg dark:bg-[#333333] rounded-md p-4",children:[t,(0,n.jsx)(s.Eh,{})]})})]})}):a}},15948:function(e,t,a){"use strict";a.d(t,{n:function(){return useElementSizeCheck}});var n=a(85665);function useElementSizeCheck(e){let[t,a]=(0,n.Z)();return[t,e(a)]}},47518:function(e,t,a){"use strict";a.d(t,{m:function(){return useTokenApys}});var n=a(26361),i=a(88439),s=a(45438),r=a(76034),l=a(64103),o=a(75930),d=a(59175),c=a(19757),m=a(12396);function useTokenApys(){let e=(0,i.b)(()=>(0,n.Yb)({},0n)),t=(0,d.p)(),{prices:a,usbApr:p,stableVaultsState:g}=(0,l.useContext)(o.g),u=(0,r.a)(),x=(0,s.i)();return(0,l.useMemo)(()=>{let a=c.iK[t],i=(0,n.ok)(x[a[0].ptyPoolBelowAddress],"staking");e[c.O1[t]]=p.apr,e.USB_END=p.apr+i;let s=(0,m.v)("0.1",10);return a.forEach(t=>{if(t.assetTokenAddress!=c.K8){let a=u[t.vault]>1n?(0,m.v)("".concat((u[t.vault]-1).toFixed(2)),10):0n,n=(0,m.v)("1",10);e[t.xTokenAddress]=(a*(s-g[t.vault].Y*g[t.vault].aar/n)+s*n)/n}}),null},[t,a,u,p,x,g]),e}},76034:function(e,t,a){"use strict";a.d(t,{a:function(){return useValutsLeverageRatio},z:function(){return useVaultLeverageRatio}});var n=a(19757),i=a(26361),s=a(75930),r=a(64103),l=a(59175),o=a(88439);function useVaultLeverageRatio(e){let{vaultsState:t,stableVaultsState:a}=(0,r.useContext)(s.g),n=t[(null==e?void 0:e.vault)||"null"],l=a[(null==e?void 0:e.vault)||"null"],o=(null==e?void 0:e.isStable)?(0,i.pF)(l.aar,l.AARDecimals):(0,i.pF)(n.aar,n.AARDecimals);return Math.max(0,1+1/(o-1))}function useValutsLeverageRatio(){let{vaultsState:e,stableVaultsState:t}=(0,r.useContext)(s.g),a=(0,l.p)(),d=n.iK[a],c=(0,o.b)(()=>new Proxy({},{get:function(e,t){return t in e&&null!==e[t]&&void 0!==e[t]?e[t]:0}}));return d.forEach(a=>{let n=e[(null==a?void 0:a.vault)||"null"],s=t[(null==a?void 0:a.vault)||"null"],r=(null==a?void 0:a.isStable)?(0,i.pF)(s.aar,s.AARDecimals):(0,i.pF)(n.aar,n.AARDecimals);c[a.vault]=Math.max(0,1+1/(r-1))}),c}},78354:function(e,t,a){"use strict";a.d(t,{R:function(){return useWrapContractWrite}});var n=a(26361),i=a(64103),s=a(47259),r=a(9709),l=a(64040),o=a(15506);function useWrapContractWrite(e,t){let{autoToast:a=!0,onSuccess:d}=t||{},[c,m]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),u=(0,r.t)(),{data:x}=(0,l.p)(),h=!u||!x||!x.account||c||!e,f=(0,o.hp)(),write=async()=>{if(!h){m(!0),g(!1);try{let t="function"==typeof e?await e():e,{request:n}=await u.simulateContract({account:x.account,...t}),i=await x.writeContract(n),r=await u.waitForTransactionReceipt({hash:i});if("success"!==r.status)throw"Transaction reverted";g(!0),d&&d(),a&&s.A.success("Transaction success"),f.update()}catch(e){a&&s.A.error((0,n.az)(e))}m(!1)}};return{write,isDisabled:h,isLoading:c,isSuccess:p}}}},function(e){e.O(0,[7495,4643,7588,2659,4176,5169,4320,2639,6209,131,7869,8410,5166,1690,8347,5631,2653,5513,1578,7638,553,7093,604,1744],function(){return e(e.s=27777)}),_N_E=e.O()}]);