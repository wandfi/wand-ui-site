"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2052],{94965:function(e,t,n){n.r(t),n.d(t,{NetValue:function(){return x}});var s=n(9268),a=n(44028),l=n(90937),i=n(27374),d=n(76394),r=n.n(d),o=n(86006),c=n(77941),u=n(82861);function x(e){var t,n;let{asset:d}=e,{prices:x,leverages:m}=(0,o.useContext)(c.SwapContext),f=null==x?void 0:null===(t=x.find(e=>e.symbol===d+"x"))||void 0===t?void 0:t.price,h=null==m?void 0:null===(n=m.find(e=>e.symbol===d))||void 0===n?void 0:n.leverage;return console.log(m),(0,s.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,s.jsx)(a.zt,{children:(0,s.jsxs)(a.fC,{children:[(0,s.jsx)(a.xz,{asChild:!0,children:(0,s.jsx)("div",{className:"inline-block px-1",children:(0,s.jsx)(i.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,s.jsx)(a.h_,{children:(0,s.jsxs)(a.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:["The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies.",(0,s.jsx)(a.Eh,{})]})})]})}),(0,s.jsxs)(l.iA,{className:"mt-4 text-sm font-normal",children:[(0,s.jsx)(l.ss,{}),(0,s.jsxs)(l.RM,{children:[(0,s.jsxs)(l.SC,{children:[(0,s.jsxs)(l.pj,{className:"flex gap-2 px-0",children:[(0,s.jsx)(r(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,s.jsx)(l.pj,{children:"Universal Stable Basis"}),(0,s.jsx)(l.pj,{}),(0,s.jsx)(l.pj,{className:"text-right",children:"$1"})]}),(0,s.jsxs)(l.SC,{children:[(0,s.jsxs)(l.pj,{className:"flex gap-2 px-0",children:[(0,s.jsx)(r(),{src:"/".concat(d+"x",".svg"),width:20,height:20,alt:"ETHx"}),d,"x"]}),(0,s.jsxs)(l.pj,{children:[(0,s.jsxs)("span",{className:"text-base text-slate-700",children:[(0,u.dq)(h),"x "]}),"Leveraged long on ETH"]}),(0,s.jsx)(l.pj,{}),(0,s.jsxs)(l.pj,{className:"text-right",children:["$",(0,u.dq)(f)]})]})]})]})]})}},13583:function(e,t,n){n.r(t),n.d(t,{VaultCard:function(){return S}});var s=n(9268),a=n(78592),l=n(87402),i=n(12120),d=n(86006),r=n(87782),o=n(57756),c=n(82861),u=n(77941),x=n(75503),m=n(17901),f=n(32795),h=n(43534),v=n(19707),b=n(18624),g=n(85418),p=n(16237),j=n(16625),y=n(32100),N=n(79552),B=n(20587);function S(e){var t,n,S,w,C,U;let{asset:k}=e,[T,E]=(0,d.useState)("mint"),{address:L}=(0,v.mA)(),[M,A]=(0,d.useState)(""),[H,I]=(0,d.useState)(""),[q,R]=(0,d.useState)(""),{prices:X,allowances4pool:P,r2s:G}=(0,d.useContext)(u.SwapContext),{balances:J}=(0,d.useContext)(o.FetcherContext),F=(0,d.useMemo)(()=>{var e;return null==J?void 0:null===(e=J.find(e=>e.symbol===k))||void 0===e?void 0:e.balance},[J]),V=(0,d.useMemo)(()=>{var e;return null==J?void 0:null===(e=J.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[J]),$=(0,d.useMemo)(()=>{var e;return null==J?void 0:null===(e=J.find(e=>e.symbol===k+"x"))||void 0===e?void 0:e.balance},[J]),Z=(0,d.useMemo)(()=>{var e;return null!==(w=null==X?void 0:null===(e=X.find(e=>e.symbol===k))||void 0===e?void 0:e.price)&&void 0!==w?w:0n},[X,k]),O=(0,d.useMemo)(()=>{var e;return null!==(C=null==X?void 0:null===(e=X.find(e=>e.symbol===k+"x"))||void 0===e?void 0:e.price)&&void 0!==C?C:0n},[X,k]),[z,_]=(0,d.useState)("USB"),[D,W]=(0,d.useState)("USB"),Y="mint"===T?k:D,K="mint"===T?z:k,Q=null==P?void 0:null===(t=P.find(e=>e.symbol===Y))||void 0===t?void 0:t.allowance,ee=Q<(0,x.f)(M),et=null===(n=h.C.find(e=>e.assetTokenSymbol===k))||void 0===n?void 0:n.poolAddress,{data:en}=(0,v.do)({address:et,abi:b.j,functionName:"calculateMintUSBOut",args:[(0,x.f)(M)],chainId:(0,g.B)(),enabled:(0,x.f)(M)>0&&"USB"===z}),{data:es}=(0,v.do)({address:et,abi:b.j,functionName:"calculateMintXTokensOut",args:[(0,x.f)(M)],chainId:(0,g.B)(),enabled:(0,x.f)(M)>0&&(0,f.Uv)(z)}),{data:ea}=(0,v.do)({address:et,abi:b.j,functionName:"calculateRedemptionOutByUSB",args:[(0,x.f)(H)],chainId:(0,g.B)(),account:L,enabled:(0,x.f)(H)>0&&"USB"===D}),el="USB"===D?null==ea?void 0:ea[0]:(0,x.f)(q),ei=j.e.find(e=>e.symbol===k),{approve:ed,isApproveLoading:er}=(0,p.y)(null==ei?void 0:ei.address[(0,g.B)()],et);j.e.find(e=>"USB"===e.symbol);let{approve:eo,isApproveLoading:ec}=(0,p.y)(null==ei?void 0:ei.address[(0,g.B)()],et),eu=null!==(U=null==G?void 0:null===(S=G.find(e=>e.symbol===k))||void 0===S?void 0:S.r2)&&void 0!==U?U:0n,{swap:ex,isSwapLoading:em}=(0,N.Z)(et,"mint"===T?M:H,Y,K,eu,!ee),ef="USB"===z?en:0n,eh="USB"!==z?es:0n,{data:ev}=(0,v.do)({address:et,abi:b.j,functionName:"calculatePairedUSBAmountToRedeemByXTokens",args:[(0,x.f)(q)],chainId:(0,g.B)(),enabled:(0,x.f)(q)>=0&&"USB"!==D}),{redeemByXToken:eb,isRedeemByXTokenLoading:eg}=(0,B.k)(et,q,!!ev);return console.log(ev),console.log(q),(0,d.useEffect)(()=>{0n===(0,m.v)(q,0)&&I(""),ev&&"USB"!==D&&I((0,c.ZM)(ev))},[ev,q]),(0,s.jsxs)("div",{className:"card relative",children:[(0,s.jsxs)("div",{className:"absolute top-[29px] right-6 flex flex-col items-end",children:[(0,s.jsxs)("div",{className:"text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(0,s.jsx)("div",{className:"text-indigo-700",children:"Adjustment Mode"})]}),(0,s.jsx)("div",{className:"text-xs text-neutral-500",children:"$USB and xToken will be minted in a fixed ratio."})]}),(0,s.jsx)("div",{className:"relative flex items-center justify-between",children:(0,s.jsxs)(i.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>E(e),children:[(0,s.jsxs)(i.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,s.jsx)(i.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,s.jsx)(i.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,s.jsx)(i.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)(a.AssetInput,{asset:k,exchange:(0,c.dq)(Z*(0,m.v)(M,0)),balance:(0,c.dq)(F),amount:M,setAmount:A}),(0,s.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,s.jsx)(r.gPZ,{})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.AssetInput,{amount:(0,c.ZM)(ef),onClick:()=>{_("USB")},asset:"USB",exchange:(0,c.dq)(ef),readonly:!0,selected:"USB"===z}),(0,s.jsx)(a.AssetInput,{amount:(0,c.ZM)(eh),onClick:()=>{_("".concat((0,l.H)(k+"x")))},asset:"".concat((0,l.H)(k+"x")),exchange:(0,c.dq)(O*(null!=eh?eh:0n)/10n**18n),readonly:!0,selected:z==="".concat((0,l.H)(k),"x")})]}),ee?(0,s.jsxs)("button",{className:"btn-primary flex items-center justify-center gap-4",onClick:ed,disabled:!ed||er,children:[er&&(0,s.jsx)(y.$,{}),"Approve"]}):(0,s.jsxs)("button",{className:"btn-primary bg-indigo-500 flex items-center justify-center gap-4",onClick:ex,disabled:!ex||em,children:[em&&(0,s.jsx)(y.$,{}),"Mint"]})]})}),(0,s.jsx)(i.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.AssetInput,{amount:H,setAmount:I,balance:(0,c.dq)(V),onClick:()=>{W("USB"),R("")},asset:"USB",exchange:(0,c.dq)((0,m.v)(H,18)),readonly:"USB"!==D,selected:"USB"===D}),(0,s.jsx)(a.AssetInput,{amount:q,setAmount:R,asset:"".concat((0,l.H)(k),"x"),onClick:()=>{W("ETHx"),I("")},exchange:(0,c.dq)((0,m.v)(q,18)*O/10n**18n),balance:(0,c.dq)($),readonly:D!==k+"x",selected:"ETHx"===D})]}),(0,s.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,s.jsx)(r.gPZ,{})}),(0,s.jsx)(a.AssetInput,{asset:"".concat((0,l.H)(k)),amount:(0,c.dq)(el),exchange:"1720.23",readonly:!0}),ee?(0,s.jsxs)("button",{className:"btn-primary flex items-center justify-center gap-4",onClick:ed,disabled:!ed||er,children:[er&&(0,s.jsx)(y.$,{}),"Approve"]}):(0,s.jsx)(s.Fragment,{children:"USB"===D?(0,s.jsxs)("button",{className:"btn-primary bg-indigo-500 flex items-center justify-center gap-4",onClick:ex,disabled:!ex||em,children:[em&&(0,s.jsx)(y.$,{}),"Redeem"]}):(0,s.jsxs)("button",{className:"btn-primary bg-indigo-500 flex items-center justify-center gap-4",onClick:eb,disabled:!eb||eg,children:[eg&&(0,s.jsx)(y.$,{}),"Redeem"]})})]})})]})})]})}},78592:function(e,t,n){n.r(t),n.d(t,{AssetInput:function(){return r}});var s=n(9268),a=n(63831),l=n(76394),i=n.n(l),d=n(86006);function r(e){let{asset:t="ETH",balance:n,exchange:l,readonly:r,selected:o,onClick:c,amount:u,setAmount:x,price:m}=e,f=(0,d.useRef)(null);return(0,s.jsxs)("div",{className:"relative",onClick:()=>{var e;c&&c(),null===(e=f.current)||void 0===e||e.focus()},children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"absolute flex items-center gap-2 top-1/2 left-4 -translate-y-1/2",children:[(0,s.jsx)(i(),{width:24,height:24,src:"/".concat(t,".svg"),alt:""}),(0,s.jsxs)("div",{className:"text-base font-medium",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:t}),m&&(0,s.jsx)("div",{className:"text-neutral-500 text-xs",children:m})]}),l&&(0,s.jsxs)("div",{className:"text-slate-500 text-xs",children:["~$",l]})]})]}),(0,s.jsx)("input",{value:u,onChange:e=>x(e.target.value),ref:f,type:"number",className:(0,a.Z)("w-full h-16 text-right pr-4 font-bold text-2xl border text-slate-700 rounded-md focus:ring-2 focus:outline-blue-500",r?"bg-slate-50":"bg-white",o?"border-indigo-500":"border-slate-200"),placeholder:"0.00",step:.01,readOnly:r})]}),n&&(0,s.jsxs)("div",{className:"text-slate-400 pl-3 mt-1 text-sm",children:["Balance: ",n,(0,s.jsx)("button",{className:"text-indigo-500 ml-2",onClick:()=>{var e;return x(null===(e=String(n))||void 0===e?void 0:e.replace(",",""))},children:"Max"})]})]})}},32100:function(e,t,n){n.d(t,{$:function(){return a}});var s=n(9268);let a=e=>{let{className:t}=e;return(0,s.jsxs)("svg",{fill:"none",className:t?"text-white":"animate-spin h-5 w-5 2-ml-1 2mr-3",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},16625:function(e,t,n){n.d(t,{e:function(){return d}});var s=n(43534),a=n(80237),l=n(61997),i=n(56883);let d=[...s.C.map(e=>({symbol:e.assetTokenSymbol,address:{[a.ws.id]:e.assetTokenAddress,[l.RJ.id]:e.assetTokenAddress}})).filter(e=>"ETH"!==e.symbol),...s.C.map(e=>({symbol:e.xTokenSymbol,address:{[a.ws.id]:e.xTokenAddress,[l.RJ.id]:e.xTokenAddress}})),{symbol:"USB",address:{[a.ws.id]:i.O[a.ws.id],[l.RJ.id]:i.O[l.RJ.id]}}]},56883:function(e,t,n){n.d(t,{O:function(){return l}});var s=n(80237),a=n(61997);let l={[s.ws.id]:"0x9EAFdB7111628129fFee1af04593858E09797cD6",[a.RJ.id]:""}},16237:function(e,t,n){n.d(t,{y:function(){return l}});var s=n(19707),a=n(69624);let l=(e,t)=>{let{config:n}=(0,s.PJ)({address:e,abi:a.em,functionName:"approve",args:[t,100000000n*BigInt(1e18)],enabled:!!t&&!!e&&"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"!==e}),{write:l,data:i,isLoading:d}=(0,s.GG)(n),{isLoading:r}=(0,s.BX)({hash:null==i?void 0:i.hash});return{approve:l,isApproveLoading:d||r}}},20587:function(e,t,n){n.d(t,{k:function(){return i}});var s=n(19707),a=n(18624),l=n(75503);let i=(e,t,n)=>{let{config:i}=(0,s.PJ)({address:e,abi:a.j,functionName:"redeemByXTokens",args:[(0,l.f)(t)],enabled:(0,l.f)(t)>0&&n}),{write:d,data:r,isLoading:o}=(0,s.GG)(i),{isLoading:c}=(0,s.BX)({hash:null==r?void 0:r.hash});return{redeemByXToken:d,isRedeemByXTokenLoading:o||c}}},79552:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(19707),a=n(18624),l=n(75503);let i=(e,t,n,i)=>{let{config:d}=(0,s.PJ)({address:e,abi:a.j,functionName:"mintUSB",args:[(0,l.f)(t)],enabled:(0,l.f)(t)>0&&i,value:(0,l.f)(n)}),{write:r,data:o,isLoading:c}=(0,s.GG)(d),{isLoading:u}=(0,s.BX)({hash:null==o?void 0:o.hash});return{mintUSB:r,isMintLoading:c||u}};var d=n(90863);let r=(e,t,n,i)=>{let{config:d}=(0,s.PJ)({address:e,abi:a.j,functionName:"mintXTokens",args:[(0,l.f)(t)],enabled:!!t&&i,value:(0,l.f)(n)}),{write:r,data:o,isLoading:c}=(0,s.GG)(d),{isLoading:u}=(0,s.BX)({hash:null==o?void 0:o.hash});return{mintXToken:r,isMintXLoading:c||u}};var o=n(32795),c=n(20587);let u=(e,t,n)=>{let{config:i}=(0,s.PJ)({address:e,abi:a.j,functionName:"redeemByUSB",args:[(0,l.f)(t)],enabled:(0,l.f)(t)>0&&n}),{write:d,data:r,isLoading:o}=(0,s.GG)(i),{isLoading:c}=(0,s.BX)({hash:null==r?void 0:r.hash});return{redeemByUSB:d,isRedeemByUSBLoading:o||c}},x=(e,t,n)=>{let{config:i}=(0,s.PJ)({address:e,abi:a.j,functionName:"usbToXTokens",args:[(0,l.f)(t)],enabled:!!t&&n}),{write:d,data:r,isLoading:o}=(0,s.GG)(i),{isLoading:c}=(0,s.BX)({hash:null==r?void 0:r.hash});return{usb2XToken:d,isUsb2XTokenLoading:o||c}};var m=n(86006);let f=(e,t,n,s,a,l)=>{let{mintUSB:f,isMintLoading:h}=i(e,t,"ETH"===n?t:"0",a!==d.q&&"USB"===s&&l),{mintXToken:v,isMintXLoading:b}=r(e,t,"ETH"===n?t:"0",(0,o.p8)(n)&&(0,o.Uv)(s)),{redeemByXToken:g,isRedeemByXTokenLoading:p}=(0,c.k)(e,t,(0,o.Uv)(n)&&(0,o.p8)(s)),{redeemByUSB:j,isRedeemByUSBLoading:y}=u(e,t,a!==d.q&&"USB"===n&&(0,o.p8)(s)),{usb2XToken:N,isUsb2XTokenLoading:B}=x(e,t,"USB"===n&&(0,o.Uv)(s)),S=(0,m.useMemo)(()=>(0,o.p8)(n)?"USB"===s?f:v:"USB"===n?(0,o.p8)(s)?j:N:g,[n,s,f,v,j,N,g]);return{swap:S,isSwapLoading:h||b||p||y||B}}},57756:function(e,t,n){n.r(t),n.d(t,{FetcherContext:function(){return o},FetcherProvider:function(){return c}});var s=n(9268),a=n(86006),l=n(19707),i=n(69624),d=n(85418),r=n(16625);let o=(0,a.createContext)({balances:[],totalSupplies:[]}),c=e=>{let{children:t}=e,{address:n}=(0,l.mA)(),{data:c}=(0,l.KQ)({address:n,watch:!0,chainId:(0,d.B)()}),{data:u}=(0,l.Dm)({contracts:[...r.e.map(e=>({address:e.address[(0,d.B)()],abi:i.em,functionName:"balanceOf",args:[n],chainId:(0,d.B)()})),...r.e.map(e=>({address:e.address[(0,d.B)()],abi:i.em,functionName:"totalSupply",chainId:(0,d.B)()}))],watch:!0,allowFailure:!0});console.log(u);let x=r.e.length,m=(0,a.useMemo)(()=>null==u?void 0:u.filter((e,t)=>t<x).map((e,t)=>{var n;return{symbol:null===(n=r.e[t])||void 0===n?void 0:n.symbol,balance:null==e?void 0:e.result}}),[u]),f=(0,a.useMemo)(()=>null==u?void 0:u.filter((e,t)=>t>=x&&t<2*x).map((e,t)=>{var n;return{symbol:null===(n=r.e[t])||void 0===n?void 0:n.symbol,totalSupply:null==e?void 0:e.result}}),[u]);return(0,s.jsx)(o.Provider,{value:{balances:m?[...m,{symbol:"ETH",balance:null==c?void 0:c.value}]:[],totalSupplies:null!=f?f:[]},children:t})}},82861:function(e,t,n){n.d(t,{MN:function(){return r},Rp:function(){return l},ZM:function(){return d},dq:function(){return i}});var s=n(77340),a=n(11639);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2?arguments[2]:void 0;if(!e)return"0.000";let a=10**t;return(Math.floor(Number((0,s.b)(e,n))*a)/a).toLocaleString("en-US",{maximumFractionDigits:t})},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!e)return"0.000";let n=10**t;return(Math.floor(Number((0,a.d)(e))*n)/n).toLocaleString("en-US",{maximumFractionDigits:t})},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!e)return"0.000";let n=10**t;return String(Math.floor(Number((0,a.d)(e))*n)/n)},r=e=>e?(Math.floor(1e3*Number((0,a.d)(e)))/1e3).toFixed(3):"0.000"},87402:function(e,t,n){n.d(t,{H:function(){return s}});function s(e){if("eth"===e.toLowerCase())return"ETH";if("ethx"===e.toLowerCase())return"ETHx";if("wbtc"===e.toLowerCase())return"WBTC";if("wbtcx"===e.toLowerCase())return"WBTCx";if("steth"===e.toLowerCase())return"stETH";if("stethx"===e.toLowerCase())return"stETHx";if("usb"===e.toLowerCase())return"USB";else return"ETH"}},32795:function(e,t,n){n.d(t,{PS:function(){return i},Uv:function(){return l},p8:function(){return a},q8:function(){return d}});var s=n(43534);let a=e=>s.C.findIndex(t=>t.assetTokenSymbol===e)>-1,l=e=>s.C.findIndex(t=>t.xTokenSymbol===e)>-1,i=(e,t)=>{for(let n=0;n<s.C.length;n++){let a=[s.C[n].assetTokenSymbol,s.C[n].xTokenSymbol];if(a.findIndex(t=>t===e)>-1||a.findIndex(e=>e===t)>-1)return n}},d=(e,t)=>"USB"===e?t.filter(t=>t!==e):a(e)?["USB",e+"x"]:l(e)?[e.replace("x","")]:t}}]);